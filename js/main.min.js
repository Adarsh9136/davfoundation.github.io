var GOOGLE_GEOLOCATION_API_KEY="AIzaSyDOtBrAgfz68KEzcoArjq5MK9mNh6Uq1V8",ETH_NODE_URL="https://mainnet.infura.io/wUiZtmeZ1KwjFrcC8zRO",web3Provider=new Web3.providers.HttpProvider(ETH_NODE_URL),web3=new Web3(web3Provider),KYC_MEMBERS_URL="https://nessie.dav.network/members";function numberWithCommas(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function updateEthRaised(){$.ajax({url:KYC_MEMBERS_URL,type:"GET",success:function(e){weiRaised=e.weiRaised,increaseWithAnimation(Number(web3.utils.fromWei(weiRaised,"ether")))}})}var ANIMATION_DURATION=1e3,PULSE_DURATION=40;function increaseWithAnimation(e){var t=$("#eth-raised"),o=Number(t.text().replace(/,/g,""));if(o!==e){var a=Math.floor(e/63123*100),n=(e-o)/(ANIMATION_DURATION/PULSE_DURATION);$(".progress-bar").css("width","calc("+a+" + 25px)");var i=setInterval(function(){e<=(o+=n)&&(o=e,clearInterval(i));t.text(numberWithCommas(Math.floor(o)))},PULSE_DURATION)}}function handleJoinTelegram(){$(function(){var t=getParameterByName("clkid");$("#join-telegram").on("click",function(){var e="https://sc2s.startappnetwork.com/trackpostinstall/davnetwork?a=click_telegram&d="+t;$.ajax({url:e,type:"GET",success:function(e,t){console.log(e,t)},error:function(e,t,o){console.log(t,o)}})})})}$(document).ready(function(){updateEthRaised(),setInterval(function(){updateEthRaised()},1e4),$(window).width()<1024&&$(".telegram-bottom").addClass("telegram-loaded");var e=$("#startchange"),t=e.offset();e.length&&$(document).scroll(function(){$(this).scrollTop()>t.top?($(".navbar-fixed-top").addClass("user-scroll"),$(".index3").addClass("makeFix")):($(".navbar-fixed-top").removeClass("user-scroll"),$(".index3").removeClass("makeFix"))}),$("#transaction_id").val(getParameterByName("transaction_id")),$("#referrer").val(window.localStorage.getItem("dav-referrer"));var o=navigator.userAgent,a=/iPad|iPhone|iPod/.test(o),n=/OS 11_0|OS 11_1|OS 11_2/.test(o);a&&n&&$("body").addClass("iosBugFixCaret"),$("ul.nav li.dropdown").hover(function(){$(this).addClass("open")},function(){$(this).removeClass("open")}),$(".not-from-us a.viewTokenInfo").on("click",function(e){e.preventDefault(),$(".blur-funds").removeClass("add-blur"),$(".not-from-us").addClass("hide")});var i=$(window).width(),r=$(window).height(),s=$(".navbar").height(),l=0;810<r&&1200<i&&(l=-140),$(".hero .hero-inner").height(r-s),$(".hero").css("padding-top",s+"px"),$(".hero.hero-ico .hero-inner .container").css("margin-top",l+"px"),i<=768&&($(".screen1").height(r-s),r<768?$(".screen1").addClass("margin-top0"):$(".screen1").removeClass("margin-top0")),$(window).on("resize",function(){var e=$(window).width(),t=$(window).height(),o=$(".navbar").height(),a=0;810<t&&1200<e&&(a=-140),$(".hero .hero-inner").height(t-o),$(".hero").css("padding-top",o+"px"),$(".hero.hero-ico .hero-inner .container").css("margin-top",a+"px"),e<=768&&($(".screen1").height(t-o),t<768?$(".screen1").addClass("margin-top0"):$(".screen1").removeClass("margin-top0"))}),$(".team-modal,.alliance-modal-small").on("shown.bs.modal",function(e){var t=($(window).height()-$(this).find(".modal-content").height())/2-30;$(".modal-dialog").css("margin-top",t+"px")});var c=window.location.href;$("#modalThankYou,#modalThankYouKYC,#modalKYCStatus").on("hidden.bs.modal",function(e){document.location.href="/"}),-1!=c.indexOf("?thank=you")&&$("#modalThankYou").modal("show"),-1!=c.indexOf("?kyc=thankyou")&&($("#modalThankYouKYC").modal("show"),ga("send","event","KYC","completed","KYC Process Completed")),-1!=c.indexOf("?kyc=status")&&$("#modalKYCStatus").modal("show"),"#tokensale"==window.location.hash&&$(".fundraising-goals").addClass("offsetMe"),$(".nav").find("a.scroll-link").click(function(e){e.preventDefault(),$(".navbar-collapse").removeClass("in"),$(".navbar-toggle").addClass("collapsed");var t=$(".navbar").height(),o=$(this).attr("href");$("html, body").animate({scrollTop:$(o).offset().top-t},700)}),$("a[href=#dav-team]").click(function(e){e.preventDefault();var t=$(".navbar").height();$("html, body").animate({scrollTop:$("#team").offset().top-t},700)}),$("a[href=#tokensale]").click(function(e){e.preventDefault();var t=$(".navbar").height();$("html, body").animate({scrollTop:$("#tokensale").offset().top-t},700)}),$("a[href=#team]").click(function(e){e.preventDefault();var t=$(".navbar").height();$("html, body").animate({scrollTop:$("#team").offset().top-t},700)});$.get("https://www.googleapis.com/youtube/v3/channels",{part:"contentDetails",id:"UCPuAOygDwCiLOdLosiQJJ1w",key:"AIzaSyDFsWKhs1WKWskhk6DErKtNCy-TR57EPbM"},function(e){$.each(e.items,function(e,t){var o;pid=t.contentDetails.relatedPlaylists.uploads,pid="PLpqJF_iMOExdrA0eJjhIk1Ies4jqAXawD",o=pid,$.get("https://www.googleapis.com/youtube/v3/playlistItems",{part:"snippet",maxResults:1,playlistId:o,key:"AIzaSyDFsWKhs1WKWskhk6DErKtNCy-TR57EPbM"},function(e){var o;$.each(e.items,function(e,t){videoId=t.snippet.resourceId.videoId,o='<iframe width="560" height="315" src="https://www.youtube.com/embed/'+videoId+'?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>',$("#daily-video").append(o)})})})}),$("#contactForm").validate({rules:{Name:{required:!0,minlength:3},Company:{required:!0,minlength:3},Email:{required:!0,email:!0}},messages:{Name:"Please specify your name",Company:"Please specify your company",Email:{required:"Invalid email",email:"Invalid email"}},submitHandler:function(e){return $.ajax({type:"POST",url:"https://formspree.io/alick@dav.network",data:$(e).serialize(),dataType:"json",success:function(){$("#modalMessage").modal("hide"),$(e)[0].reset(),$("#modalThankYouAlliance").modal("show")}}),!1}}),$("a.show-more").click(function(e){e.preventDefault(),$(".hidden-press").fadeToggle();var t=$(this).find("span");"more"==t.text()?t.text("less"):t.text("more")}),$("a.show-articles").click(function(e){e.preventDefault(),$(".hidden-articles").fadeToggle();var t=$(this).find("span");"more"==t.text()?t.text("less"):t.text("more")}),$("#alert-announcement").on("closed.bs.alert",function(){return function(e,t,o){var a=new Date;a.setDate(a.getDate()+o);var n=escape(t)+(null==o?"":"; expires="+a.toUTCString());document.cookie=e+"="+n}("dav-utility-token",!0,14),$(".telegram-bottom").removeClass("extra-space"),!1}),"true"===function(e){var t=document.cookie,o=t.indexOf(" "+e+"=");if(-1==o&&(o=t.indexOf(e+"=")),-1==o)t=null;else{o=t.indexOf("=",o)+1;var a=t.indexOf(";",o);-1==a&&(a=t.length),t=unescape(t.substring(o,a))}return t}("dav-utility-token")&&($("#alert-announcement").hide(),$(".telegram-bottom").removeClass("extra-space")),$("#checkKYC").on("click",function(e){ga("send","event","KYC","status checked","Check KYC Status"),e.preventDefault();var a=$("#kycmail").val();if(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)){a=encodeURIComponent(a);var n=encodeURIComponent(window.localStorage.getItem("dav-referrer")),t="https://nessie.dav.network/status?email="+a+"&referrer="+n;$(".kyc-loader").removeClass("hide"),$(".kyc-error").hide(),$.ajax({type:"GET",url:t,dataType:"json",success:function(e){$(".kyc-loader").addClass("hide"),$("#kyc-form").hide();var t,o="";switch(e.statusText){case"AutoFinish":case"ManualFinish":o="Congratulations!",t="Congratulations",$(".kyc-response").html('You’re now officially whitelisted for the DAV Token Sale. Please watch this <a href="https://www.youtube.com/watch?v=bHzJbl9ygrI&feature=youtu.be" target="_blank">video contribution tutorial</a> on how to participate and join our token sale below.'),$("#whitelisted-join-token-sale-button").removeClass("hide"),$("#forgot-wallet-address").removeClass("hide"),$("#forgot-wallet-address").on("click",function(e){e.preventDefault(),$.ajax({type:"GET",url:"https://nessie.dav.network/restorewalletaddress?email="+a,dataType:"json",success:function(e){$("#whitelisted-join-token-sale-button,.kyc-telegram").addClass("hide"),$("#forgot-wallet-address").addClass("hide"),$(".kyc-title").text(""),$(".kyc-response").text(""),$(".kyc-response").html("Your wallet address has been sent to <b>"+decodeURIComponent(a)+"</b>"),$(".kyc-close").removeClass("hide")}})});break;case"Failed":case"CheckRequired":t=o="Your KYC application is currently being processed.",$(".kyc-response").text("You’ll receive an email once your application has been processed with next steps."),$(".kyc-close,.kyc-questions").removeClass("hide");break;case"Rejected":t=o="Your KYC application has not been accepted.",$(".kyc-response").html("If you believe your KYC has been rejected by mistake we ask that you please resubmit your KYC by clicking the button below. Our systems tell us you should be able to successfully complete your KYC by doing the following:<br><br><b>"+e.suggestionText+"</b>"),$(".kyc-return,.kyc-medium,.kyc-questions").removeClass("hide"),$(".kyc-return").attr("href","https://nessie.dav.network/join?email="+a+"&referrer="+n);break;case"Expired":t=o="Your KYC application has expired.",$(".kyc-response").text("We ask you to please resubmit your KYC by clicking the button below."),$(".kyc-close,.kyc-medium,.kyc-questions,.return").removeClass("hide"),$(".kyc-return").attr("href","https://nessie.dav.network/join?email="+a+"&referrer="+n);break;case"Started":t="email not exist",$("#kyc-form").show(),$(".kyc-error").show(),$(".kyc-error").animateCss("shake"),$(".kyc-error").text("This email does not exist")}o&&$(".kyc-title").text(o),ga("send","event","KYC","status results",e.statusText,t)}})}else $(".kyc-error").show(),$(".kyc-error").animateCss("shake"),$(".kyc-error").text("Please enter a valid email address")});var d=moment.utc([2018,5,25,13,0,0]);$("#countdown,#countdownMobile").countdown({until:d.toDate(),format:"dHMS"}),$("#mc-embedded-subscribe-form").on("submit",function(){ga("send","event","Registration","started","Register")})}),$(function(){$("body").on("hidden.bs.modal",function(e){$(e.target).find("iframe").each(function(e,t){$(t).attr("src",$(t).attr("src"))})})});var vidShowAndTell=document.querySelector("video"),scrollAction=function(){window.removeEventListener("scroll",scrollAction),vidShowAndTell.play()};window.addEventListener("scroll",scrollAction);var announcementTrigger=document.querySelector(".video-home"),scrollAnouncement=function(){window.removeEventListener("scroll",scrollAnouncement),$("#alert-announcement").removeClass("hide"),$("#alert-announcement").is(":visible")&&$(".telegram-bottom").addClass("extra-space")};function addCommas(e){x=(e+="").split("."),x1=x[0],x2=1<x.length?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2}window.addEventListener("scroll",scrollAnouncement),$.ajax({type:"GET",url:"https://nessie.dav.network/members",dataType:"json",success:function(e){$(".mailchimp-count").countTo({from:18350,to:e.count,speed:3e3,refreshInterval:20,formatter:function(e,t){return e=(e=e.toFixed(t.decimals)).replace(/\B(?=(\d{3})+(?!\d))/g,",")}})}});var AVATAR_SIZE=128;function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}function beforeSubmitKycRegistration(){return e=$(".required.email").eq(2),t=e.val(),console.log(t),!(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)?(e.removeClass("invalid"),0):(e.addClass("invalid"),1))&&(ga("send","event","Registration","click","email_Registration_click"),!0);var e,t}$(function(){$.getJSON("contributors.json",function(e){var o=[],n=[];$.each(e,function(e,t){o.push("<li><a href='#contributor-"+e+"' data-toggle='modal' data-target='#contributor-"+e+"'><img src='"+t.avatar+"&s="+AVATAR_SIZE+"'></a></li>")}),$.each(e,function(e,t){for(var o="",a=0;a<t.repos.length;a++)a!=t.repos.length-1?o+="<a href='https://github.com/DAVFoundation/"+t.repos[a]+"' class='repo-contrib' target='_blank'>"+t.repos[a]+"</a>,":o+="<a href='https://github.com/DAVFoundation/"+t.repos[a]+"' class='repo-contrib' target='_blank'>"+t.repos[a]+"</a>";null==t.name&&(t.name=t.user),null==t.bio?t.bio="":t.bio="&ldquo;"+t.bio+"&rdquo;",n.push("<div class='modal team-modal' id='contributor-"+e+"' tabindex='-1' role='dialog' aria-labelledby='myModalLabel'><div class='modal-dialog' role='document'><div class='modal-content'><div class='modal-body'><button type='button' class='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'>&times;</span></button><div class='row'><div class='col-sm-4'><br><br><img src='"+t.avatar+"&s="+AVATAR_SIZE+"' width='100%'></div><div class='col-sm-8'><h2>"+t.name+"</h2><h5>Open Source Contributor</h5><p><i>"+t.bio+"</i></p><p>DAV repos that the user contributed to: "+o+"</p><p>Total number of contributions to DAV: <b>"+t.contrib_count+"</b></p><a href='https://github.com/"+t.user+"' target='_blank'><img src='img/icons/github-footer.png' width='25'></a></div></div></div></div></div></div>")}),$("<ul/>",{class:"contributors-list",html:o.join("")}).appendTo(".contributors"),$("<div/>",{class:"contributors-modal",html:n.join("")}).appendTo("body"),$(".team-modal").on("shown.bs.modal",function(e){var t=($(window).height()-$(this).find(".modal-content").height())/2-30;t<0&&(t=0),$(".modal-dialog").css("margin-top",t+"px")})})}),$.fn.extend({animateCss:function(e,t){var o=function(e){var t={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(var o in t)if(void 0!==e.style[o])return t[o]}(document.createElement("div"));return this.addClass("animated "+e).one(o,function(){$(this).removeClass("animated "+e),"function"==typeof t&&t()}),this}});var $floatingButton=$("#floating-button");function setDifferentCtaForAdwordsUsers(){if(isAdwordsRedirect()){$floatingButton.find("span").html("REGISTER FOR<br>WHITELIST");var e=$("#mc-embedded-subscribe-form").attr("action");$floatingButton.attr("href",e),$floatingButton.attr("onclick",null).off("click"),$floatingButton.click(sendAnaliticsEvent),changeFloatingButtonIcon("fa-angle-double-right")}}function isAdwordsRedirect(){return window.location.search.includes("gclid")}function changeFloatingButtonIcon(e){$floatingButton.find("i").removeClass("fa-telegram").addClass(e)}function sendAnaliticsEvent(){ga("send","event","Registration-Bottom-Click","click","floating_Registration_click")}$(window).scroll(function(){$(".telegram-bottom").addClass("telegram-loaded")});